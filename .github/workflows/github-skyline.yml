name: Generate Starfield Metrics
on:
  schedule:
    - cron: "0 0 * * *" # 每天午夜自动更新
  workflow_dispatch: # 允许手动触发
  push:
    branches: ["main", "master"]

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: github-starfield.svg # 输出文件名
          base: "" # 隐藏基础的统计信息，让背景更纯净
          
          # 核心插件：星际航行
          plugin_starfield: yes
          # 动画持续时间（数字越大，星星飞行速度感知越平滑）
          # 设置为 30s 到 60s 之间效果最佳
          # plugin_starfield_duration: 45s 

          # 可选：如果你想在星空中带上你最近 Star 的项目，取消下面两行注释
          # plugin_stars: yes
          # plugin_stars_limit: 3

          # 全局配置
          config_animations: yes # 必须开启，否则星星是静止的
          config_timezone: Asia/Shanghai
          committer_message: "chore: update starfield metrics"
